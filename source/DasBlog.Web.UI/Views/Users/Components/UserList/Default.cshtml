@using System.Reflection.Metadata.Ecma335
@using DasBlog.Web.Common
@model System.Collections.Generic.IEnumerable<DasBlog.Core.Security.User>

@functions
{

    string ElideTitle(string title)
    {
        const int maxLen = 30;
        if (title.Length > maxLen)
        {
            return title.Substring(0, maxLen - 3) + "...";
        }
        else
        {
            return title;
        }
    }

}


<div>
    @*
    <form asp-action="Create" asp-controller="NoteManager">
        <button type="submit" class="btn btn-primary">Create</button>
    </form>
*@
    <form asp-action="Maintenance" asp-controller="Users" method="get">
        @if (ViewBag.SubViewName == Constants.ViewUserSubView)
        {
            <input type="submit" class="btn" name="subAction" value="@Constants.UsersCreateAction"/>
        }
        else
        {
            <input type="submit" class="btn" name="subAction" value="@Constants.UsersCreateAction" disabled/>
            
        }
    </form>
</div>
<div style="max-height: 500px; overflow-y: scroll">
    <table class="table">
        <thead>
        <tr>
            <th>
                Users
            </th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        @foreach (var item in Model) {
            <tr>
                <td>
                    <a href="/users/@item.EmailAddress"> @ElideTitle(item.EmailAddress)</a>
                </td>
            </tr>
        }
        </tbody>
    </table>
</div>
